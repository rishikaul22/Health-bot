version: "2.0"

stories:

- story: welcome
  steps:
  - intent: greet
  - action: utter_name
  - action: utter_bot_info
  - checkpoint: check_asked_question

- story: happy_registration
  steps:
  - checkpoint: check_asked_question
  - or:
    - intent: want_to_register_affirm
    - intent: affirm
  - action: profile_form
  - active_loop: profile_form

- story: happy_more_info
  steps:
  - checkpoint: check_asked_question
  - intent: want_info_affirm
  - action: utter_ask_more_info

- story: unhappy_more_info
  steps:
  - checkpoint: check_asked_question
  - intent: want_info_deny
  - action: utter_ask_registration
  - checkpoint: check_deny_both

- story: unhappy_registration
  steps:
  - checkpoint: check_asked_question
  - intent: want_to_register_deny
  - action: utter_ask_want_more_info
  - checkpoint: check_deny_both

- story: both_deny
  steps: 
  - checkpoint: check_deny_both
  - or:
    - intent: want_info_deny
    - intent: want_to_register_deny
  - action: utter_no_worries
  - action: utter_goodbye

- story: not_both_deny
  steps: 
  - checkpoint: check_deny_both
  - or:
    - intent: want_info_affirm
    - intent: affirm
  - action: utter_ask_more_info

- story: trying_action_restart
  steps:
  - intent: ask_lower_stress
  - action: utter_ask_name
  - intent: ask_name
  - slot_was_set:
    - name:
  - action: action_session_start